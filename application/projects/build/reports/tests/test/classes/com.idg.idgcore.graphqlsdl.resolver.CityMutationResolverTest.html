<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"/>
<title>Test results - CityMutationResolverTest</title>
<link href="../css/base-style.css" rel="stylesheet" type="text/css"/>
<link href="../css/style.css" rel="stylesheet" type="text/css"/>
<script src="../js/report.js" type="text/javascript"></script>
</head>
<body>
<div id="content">
<h1>CityMutationResolverTest</h1>
<div class="breadcrumbs">
<a href="../index.html">all</a> &gt; 
<a href="../packages/com.idg.idgcore.graphqlsdl.resolver.html">com.idg.idgcore.graphqlsdl.resolver</a> &gt; CityMutationResolverTest</div>
<div id="summary">
<table>
<tr>
<td>
<div class="summaryGroup">
<table>
<tr>
<td>
<div class="infoBox" id="tests">
<div class="counter">3</div>
<p>tests</p>
</div>
</td>
<td>
<div class="infoBox" id="failures">
<div class="counter">0</div>
<p>failures</p>
</div>
</td>
<td>
<div class="infoBox" id="ignored">
<div class="counter">0</div>
<p>ignored</p>
</div>
</td>
<td>
<div class="infoBox" id="duration">
<div class="counter">1.106s</div>
<p>duration</p>
</div>
</td>
</tr>
</table>
</div>
</td>
<td>
<div class="infoBox success" id="successRate">
<div class="percent">100%</div>
<p>successful</p>
</div>
</td>
</tr>
</table>
</div>
<div id="tabs">
<ul class="tabLinks">
<li>
<a href="#tab0">Tests</a>
</li>
<li>
<a href="#tab1">Standard output</a>
</li>
</ul>
<div id="tab0" class="tab">
<h2>Tests</h2>
<table>
<thead>
<tr>
<th>Test</th>
<th>Method name</th>
<th>Duration</th>
<th>Result</th>
</tr>
</thead>
<tr>
<td class="success">JUnit test for save as Draft</td>
<td class="success">processCitySaveDraft()</td>
<td class="success">0.035s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">JUnit test for save as Draft to New</td>
<td class="success">processCitySaveDraftToNew()</td>
<td class="success">0.978s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">JUnit test for Auth the Draft-New record</td>
<td class="success">processCitySaveDraftToNewAuth()</td>
<td class="success">0.093s</td>
<td class="success">passed</td>
</tr>
</table>
</div>
<div id="tab1" class="tab">
<h2>Standard output</h2>
<span class="code">
<pre>18:33:08.698 [Test worker] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.idg.idgcore.graphqlsdl.resolver.CityMutationResolverTest], using SpringBootContextLoader
18:33:08.699 [Test worker] INFO  o.s.t.c.s.AbstractContextLoader - Could not detect default resource locations for test class [com.idg.idgcore.graphqlsdl.resolver.CityMutationResolverTest]: no resource found for suffixes {-context.xml, Context.groovy}.
18:33:08.702 [Test worker] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
18:33:08.703 [Test worker] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@78d49939, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@21f27bb5, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2e2a2b07, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@52dc71b2, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@e1d2781, org.springframework.test.context.support.DirtiesContextTestExecutionListener@3c00da24, org.springframework.test.context.transaction.TransactionalTestExecutionListener@430dbcb0, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@726d0482, org.springframework.test.context.event.EventPublishingTestExecutionListener@15ab0461, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@2f403d0a, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@186fc6e, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@1bd5b1c8, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@569026df, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@7896e96a, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@4e451f9a]

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.6)

18:33:09.191 [Test worker] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
18:33:09.253 [Test worker] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 62 ms. Found 6 JPA repository interfaces.
18:33:09.738 [Test worker] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
18:33:09.901 [Test worker] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1146 ms
18:33:10.436 [Test worker] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    select
        mappingent0_.id as id1_3_,
        mappingent0_.action as action2_3_,
        mappingent0_.authorized as authoriz3_3_,
        mappingent0_.inactive_previous_record as inactive4_3_,
        mappingent0_.insert_record_into_audit as insert_r5_3_,
        mappingent0_.insert_record_into_basetable as insert_r6_3_,
        mappingent0_.last_configuration_action as last_con7_3_,
        mappingent0_.mapping_status as mapping_8_3_,
        mappingent0_.role as role9_3_,
        mappingent0_.status as status10_3_,
        mappingent0_.update_record_version as update_11_3_ 
    from
        idgc_coe_mapping_config mappingent0_
18:33:14.718 [Test worker] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 14 endpoint(s) beneath base path '/actuator'
18:33:14.815 [Test worker] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 54822 (http) with context path ''
Hibernate: 
    select
        mutationen0_.task_identifier as task_ide1_5_,
        mutationen0_.task_code as task_cod2_5_,
        mutationen0_.created_by as created_3_5_,
        mutationen0_.creation_time as creation4_5_,
        mutationen0_.last_updated_by as last_upd5_5_,
        mutationen0_.last_updated_time as last_upd6_5_,
        mutationen0_.action as action7_5_,
        mutationen0_.authorized as authoriz8_5_,
        mutationen0_.last_configuration_action as last_con9_5_,
        mutationen0_.payload as payload10_5_,
        mutationen0_.record_version as record_11_5_,
        mutationen0_.status as status12_5_ 
    from
        idgc_coe_mutation_stage_cnfg mutationen0_ 
    where
        mutationen0_.task_code=? 
        and mutationen0_.task_identifier=?
Hibernate: 
    select
        mutationen0_.task_identifier as task_ide1_5_0_,
        mutationen0_.task_code as task_cod2_5_0_,
        mutationen0_.created_by as created_3_5_0_,
        mutationen0_.creation_time as creation4_5_0_,
        mutationen0_.last_updated_by as last_upd5_5_0_,
        mutationen0_.last_updated_time as last_upd6_5_0_,
        mutationen0_.action as action7_5_0_,
        mutationen0_.authorized as authoriz8_5_0_,
        mutationen0_.last_configuration_action as last_con9_5_0_,
        mutationen0_.payload as payload10_5_0_,
        mutationen0_.record_version as record_11_5_0_,
        mutationen0_.status as status12_5_0_ 
    from
        idgc_coe_mutation_stage_cnfg mutationen0_ 
    where
        mutationen0_.task_identifier=? 
        and mutationen0_.task_code=?
Hibernate: 
    insert 
    into
        idgc_coe_mutation_stage_cnfg
        (created_by, creation_time, last_updated_by, last_updated_time, action, authorized, last_configuration_action, payload, record_version, status, task_identifier, task_code) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        idgc_coe_audit_history_cnfg
        (created_by, creation_time, last_updated_by, last_updated_time, action, authorized, last_configuration_action, payload, record_version, reference_no, status, task_code, task_identifier, trace_info) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
 srcDraft to New 
 DONE 
Hibernate: 
    select
        mutationen0_.task_identifier as task_ide1_5_,
        mutationen0_.task_code as task_cod2_5_,
        mutationen0_.created_by as created_3_5_,
        mutationen0_.creation_time as creation4_5_,
        mutationen0_.last_updated_by as last_upd5_5_,
        mutationen0_.last_updated_time as last_upd6_5_,
        mutationen0_.action as action7_5_,
        mutationen0_.authorized as authoriz8_5_,
        mutationen0_.last_configuration_action as last_con9_5_,
        mutationen0_.payload as payload10_5_,
        mutationen0_.record_version as record_11_5_,
        mutationen0_.status as status12_5_ 
    from
        idgc_coe_mutation_stage_cnfg mutationen0_ 
    where
        mutationen0_.task_code=? 
        and mutationen0_.task_identifier=?
18:33:15.921 [http-nio-auto-1-exec-5] ERROR c.i.i.c.d.s.m.MutationsDomainService - IDC_COE_0003 :: Record already exists.Please, authorize existing record and retry.
18:33:15.922 [http-nio-auto-1-exec-5] ERROR c.i.i.app.AbstractApplicationService - Exception occurred while processing
com.idg.idgcore.datatypes.exceptions.BusinessException: IDC_COE_0003 :: Record already exists.Please, authorize existing record and retry.
	at com.idg.idgcore.coe.exception.ExceptionUtil.handleException(ExceptionUtil.java:21) ~[main/:na]
	at com.idg.idgcore.coe.domain.service.mutation.MutationsDomainService.validateUnauthorizedRecords(MutationsDomainService.java:181) ~[main/:na]
	at com.idg.idgcore.coe.domain.service.mutation.MutationsDomainService.validateMutation(MutationsDomainService.java:141) ~[main/:na]
	at com.idg.idgcore.coe.domain.service.mutation.MutationsDomainService.addUpdate(MutationsDomainService.java:80) ~[main/:na]
	at com.idg.idgcore.coe.domain.process.ProcessConfiguration.addUpdateRecord(ProcessConfiguration.java:125) ~[main/:na]
	at com.idg.idgcore.coe.domain.process.ProcessConfiguration.process(ProcessConfiguration.java:69) ~[main/:na]
	at com.idg.idgcore.coe.app.service.city.CityApplicationService.processCity(CityApplicationService.java:136) ~[main/:na]
	at com.idg.idgcore.coe.endpoint.graphql.resolver.city.CityMutationResolver.processCity(CityMutationResolver.java:22) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at graphql.kickstart.tools.resolver.MethodFieldResolverDataFetcher.get(MethodFieldResolver.kt:261) ~[graphql-java-tools-11.0.1.jar:na]
	at graphql.validation.schemawiring.FieldValidatorDataFetcher.get(FieldValidatorDataFetcher.java:44) ~[graphql-java-extended-validation-16.0.0.jar:na]
	at graphql.execution.instrumentation.dataloader.DataLoaderDispatcherInstrumentation.lambda$instrumentDataFetcher$0(DataLoaderDispatcherInstrumentation.java:86) ~[graphql-java-16.2.jar:na]
	at graphql.execution.ExecutionStrategy.fetchField(ExecutionStrategy.java:270) ~[graphql-java-16.2.jar:na]
	at graphql.execution.ExecutionStrategy.resolveFieldWithInfo(ExecutionStrategy.java:203) ~[graphql-java-16.2.jar:na]
	at graphql.execution.ExecutionStrategy.resolveField(ExecutionStrategy.java:177) ~[graphql-java-16.2.jar:na]
	at graphql.execution.AsyncSerialExecutionStrategy.lambda$execute$1(AsyncSerialExecutionStrategy.java:43) ~[graphql-java-16.2.jar:na]
	at graphql.execution.Async.eachSequentiallyImpl(Async.java:80) ~[graphql-java-16.2.jar:na]
	at graphql.execution.Async.eachSequentially(Async.java:69) ~[graphql-java-16.2.jar:na]
	at graphql.execution.AsyncSerialExecutionStrategy.execute(AsyncSerialExecutionStrategy.java:38) ~[graphql-java-16.2.jar:na]
	at graphql.execution.Execution.executeOperation(Execution.java:165) ~[graphql-java-16.2.jar:na]
	at graphql.execution.Execution.execute(Execution.java:104) ~[graphql-java-16.2.jar:na]
	at graphql.GraphQL.execute(GraphQL.java:557) ~[graphql-java-16.2.jar:na]
	at graphql.GraphQL.parseValidateAndExecute(GraphQL.java:482) ~[graphql-java-16.2.jar:na]
	at graphql.GraphQL.executeAsync(GraphQL.java:446) ~[graphql-java-16.2.jar:na]
	at graphql.kickstart.execution.GraphQLInvoker.executeAsync(GraphQLInvoker.java:37) ~[graphql-java-kickstart-11.1.1.jar:na]
	at graphql.kickstart.execution.GraphQLInvoker.execute(GraphQLInvoker.java:28) ~[graphql-java-kickstart-11.1.1.jar:na]
	at graphql.kickstart.servlet.HttpRequestInvokerImpl.invoke(HttpRequestInvokerImpl.java:159) ~[graphql-java-servlet-11.1.1.jar:na]
	at graphql.kickstart.servlet.HttpRequestInvokerImpl.lambda$invokeAndHandleAsync$2(HttpRequestInvokerImpl.java:77) ~[graphql-java-servlet-11.1.1.jar:na]
	at org.apache.catalina.core.AsyncContextImpl$RunnableWrapper.run(AsyncContextImpl.java:547) ~[tomcat-embed-core-9.0.46.jar:9.0.46]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.46.jar:9.0.46]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]
 srcDraft 
 DONE 
Hibernate: 
    select
        mutationen0_.task_identifier as task_ide1_5_,
        mutationen0_.task_code as task_cod2_5_,
        mutationen0_.created_by as created_3_5_,
        mutationen0_.creation_time as creation4_5_,
        mutationen0_.last_updated_by as last_upd5_5_,
        mutationen0_.last_updated_time as last_upd6_5_,
        mutationen0_.action as action7_5_,
        mutationen0_.authorized as authoriz8_5_,
        mutationen0_.last_configuration_action as last_con9_5_,
        mutationen0_.payload as payload10_5_,
        mutationen0_.record_version as record_11_5_,
        mutationen0_.status as status12_5_ 
    from
        idgc_coe_mutation_stage_cnfg mutationen0_ 
    where
        mutationen0_.task_code=? 
        and mutationen0_.task_identifier=?
Hibernate: 
    select
        mutationen0_.task_identifier as task_ide1_5_0_,
        mutationen0_.task_code as task_cod2_5_0_,
        mutationen0_.created_by as created_3_5_0_,
        mutationen0_.creation_time as creation4_5_0_,
        mutationen0_.last_updated_by as last_upd5_5_0_,
        mutationen0_.last_updated_time as last_upd6_5_0_,
        mutationen0_.action as action7_5_0_,
        mutationen0_.authorized as authoriz8_5_0_,
        mutationen0_.last_configuration_action as last_con9_5_0_,
        mutationen0_.payload as payload10_5_0_,
        mutationen0_.record_version as record_11_5_0_,
        mutationen0_.status as status12_5_0_ 
    from
        idgc_coe_mutation_stage_cnfg mutationen0_ 
    where
        mutationen0_.task_identifier=? 
        and mutationen0_.task_code=?
Hibernate: 
    update
        idgc_coe_mutation_stage_cnfg 
    set
        last_updated_by=?,
        last_updated_time=?,
        action=?,
        authorized=?,
        last_configuration_action=?,
        payload=?,
        record_version=?,
        status=? 
    where
        task_identifier=? 
        and task_code=?
Hibernate: 
    insert 
    into
        idgc_coe_audit_history_cnfg
        (created_by, creation_time, last_updated_by, last_updated_time, action, authorized, last_configuration_action, payload, record_version, reference_no, status, task_code, task_identifier, trace_info) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    select
        cityentity0_.city_code as city_cod1_1_0_,
        cityentity0_.created_by as created_2_1_0_,
        cityentity0_.creation_time as creation3_1_0_,
        cityentity0_.last_updated_by as last_upd4_1_0_,
        cityentity0_.last_updated_time as last_upd5_1_0_,
        cityentity0_.authorized as authoriz6_1_0_,
        cityentity0_.city_name as city_nam7_1_0_,
        cityentity0_.country_code as country_8_1_0_,
        cityentity0_.last_configuration_action as last_con9_1_0_,
        cityentity0_.record_version as record_10_1_0_,
        cityentity0_.state_code as state_c11_1_0_,
        cityentity0_.status as status12_1_0_,
        cityentity0_.time_zone as time_zo13_1_0_ 
    from
        idgc_coe_city_code_cnfg cityentity0_ 
    where
        cityentity0_.city_code=?
Hibernate: 
    insert 
    into
        idgc_coe_city_code_cnfg
        (created_by, creation_time, last_updated_by, last_updated_time, authorized, city_name, country_code, last_configuration_action, record_version, state_code, status, time_zone, city_code) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
 authorize-checker-new-city 
 DONE 
</pre>
</span>
</div>
</div>
<div id="footer">
<p>
<div>
<label class="hidden" id="label-for-line-wrapping-toggle" for="line-wrapping-toggle">Wrap lines
<input id="line-wrapping-toggle" type="checkbox" autocomplete="off"/>
</label>
</div>Generated by 
<a href="http://www.gradle.org">Gradle 7.4</a> at 18-Jul-2022, 6:33:16 pm</p>
</div>
</div>
</body>
</html>
